<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>aqp</title>

<style>
body {
    margin: 0;
    padding: 0;
    font-family: Arial, sans-serif;
    display: flex;
    justify-content: center;
    transition: 0.25s;
    background: #000;
    color: white;
}
#chatbox {
    width: 90%;
    max-width: 600px;
    margin-top: 40px;
    padding: 20px;
    border-radius: 10px;
    transition: 0.25s;
}
#messages {
    height: 400px;
    overflow-y: auto;
    padding: 10px;
    border-radius: 10px;
    margin-bottom: 10px;
    transition: 0.25s;
}
.msg { margin-bottom: 15px; }
.user { font-weight: bold; }
.bot { font-weight: bold; }
input { padding: 10px; border-radius: 6px; border: none; transition: 0.25s; flex:1; min-width:80px; }
button { padding: 8px 12px; border-radius: 6px; border: none; cursor: pointer; font-weight: bold; transition: 0.25s; }
#themeSelect { margin-bottom: 10px; padding: 8px; font-size: 14px; border-radius: 6px; }



body.theme-ufo { background: #111; color: white; }
body.theme-ufo #chatbox { background: #222; color: white; }
body.theme-ufo #messages { background: #000; }
body.theme-ufo input { background: #333; color: white; }
body.theme-ufo button { background: #00ffaa; }
body.theme-ufo .user { color: #21de50; }
body.theme-ufo .bot { color: #b4ff93; }

body.theme-iridescence { background: white; color: black; }
body.theme-iridescence #chatbox { background: linear-gradient(135deg,#a6d0ff,#ffb2e6); color: black; }
body.theme-iridescence #messages { background: rgba(255,255,255,0.7); color: black; }
body.theme-iridescence input { background: white; border: 1px solid #ccc; color: black; }
body.theme-iridescence button { background: #ff7cd8; color: black; }
body.theme-iridescence .user { color: #0077ff; }
body.theme-iridescence .bot { color: #ff0088; }

body.theme-reef { background: #000; color: #ffddd2; }
body.theme-reef #chatbox { background: #1f2f38; color: #ffddd2; }
body.theme-reef #messages { background: #0b1c24; color: #ffddd2; }
body.theme-reef input { background: #103040; color: #ffddd2; border: 1px solid #ff8c42; }
body.theme-reef button { background: #ff8c42; color: black; }
body.theme-reef .user { color: #ff8c42; }
body.theme-reef .bot { color: #d185de; }

body.theme-wikipedia { background: white; color: black; }
body.theme-wikipedia #chatbox { background: #f2f2f2; color: black; }
body.theme-wikipedia #messages { background: white; color: black; border: 1px solid #ccc; }
body.theme-wikipedia input { background: white; border: 1px solid #aaa; color: black; }
body.theme-wikipedia button { background: #ddd; color: black; }

body.theme-89 { 
    background: linear-gradient(135deg, #000000, #000080, #0047AB, #800080, #FF69B4);
    color: white;
}
body.theme-89 #chatbox { 
    background: linear-gradient(135deg, #000000, #000080, #4e3c7a);
    color: white; 
}
body.theme-89 #messages { 
    background: linear-gradient(135deg, #800080, #FF69B4);
    color: white; 
}
body.theme-89 input { background: #111; color: white; border:1px solid #555; }
body.theme-89 button { background: #800080; color: white; }
body.theme-89 .user { color: #4800ff; }
body.theme-89 .bot { color: #ffffff; }

.disamb-btn {
    margin: 3px 3px 3px 0;
    padding: 6px 12px;
    border-radius: 6px;
    border: none;
    cursor: pointer;
    background: #ff7cd8;
    color: black;
    font-weight: bold;
}

/* image */
.page-image {
    max-width: 100%;
    border-radius: 10px;
    margin-bottom: 10px;
}
</style>
</head>

<body class="theme-iridescence">

<div id="chatbox">
    <h2>Aventurine Quartz Pineapple</h2>
    <h2>‎ ‎ ‎ ‎ ‎ mini browser</h2>
    <h2>‎ ‎ ‎ ‎ ‎ by eightynine</h2>

    <select id="themeSelect" onchange="changeTheme()">
        <option value="iridescence" selected>Iridescence</option>
        <option value="ufo">UFO</option>
        <option value="reef">Reef</option>
        <option value="wikipedia">Wikipedia</option>
        <option value="89">89</option>
    </select>

    <div id="messages"></div>

    <div style="display:flex; align-items:center; gap:2px; margin-top:10px; flex-wrap:nowrap;">
        <input id="input" placeholder="website by eightyninesecondstomidnight. 898989">
        <button onclick="send()">Send</button>
        <label style="display:flex; align-items:center; gap:4px; font-size:14px; cursor:pointer;">
            <input type="checkbox" id="deepSearch" style="margin:0;">Deep Search
        </label>
    </div>
</div>

<script>
function changeTheme() {
    document.body.className = "theme-" + document.getElementById("themeSelect").value;
}

async function send() {
    let text = document.getElementById("input").value.trim();
    if (!text) return;

    addMessage("user", text);
    document.getElementById("input").value = "";
    addMessage("bot", "...");

    let useDeep = document.getElementById("deepSearch").checked;

    try {
        let pageTitle = text;

        if (useDeep) {
            const searchRes = await fetch(
                `https://en.wikipedia.org/w/api.php?action=query&list=search&srsearch=${encodeURIComponent(text)}&format=json&origin=*`
            );
            const searchData = await searchRes.json();
            if (searchData.query.search.length > 0) {
                pageTitle = searchData.query.search[0].title;
            }
        }

        // summary and stuff
        const summaryRes = await fetch(
            `https://en.wikipedia.org/api/rest_v1/page/summary/${encodeURIComponent(pageTitle)}`
        );
        if (!summaryRes.ok) {
            addMessage("bot", "Error: No summary exists for this.");
            return;
        }
        const data = await summaryRes.json();

        // the disambiguation 
        if (data.extract && /(may refer to:|The following .* are|.* can refer to)/i.test(data.extract)) {
            addMessage("bot", `Disambiguation found for "<b>${pageTitle}</b>". Please choose:`);

            const optionsRes = await fetch(
                `https://en.wikipedia.org/w/api.php?action=parse&page=${encodeURIComponent(pageTitle)}&prop=links&format=json&origin=*`
            );
            const optionsData = await optionsRes.json();

            if (optionsData.parse && optionsData.parse.links) {
                const links = optionsData.parse.links
                    .filter(l => l.exists !== 0)
                    .filter(l => !/^(Wikipedia|Template|Help|File|Category|Portal|Special):/.test(l["*"]));

                if (links.length === 0) addMessage("bot", "No valid options found.");
                else links.forEach(link => {
                    const btn = document.createElement("button");
                    btn.textContent = link["*"];
                    btn.className = "disamb-btn";
                    btn.onclick = () => {
                        document.getElementById("input").value = link["*"];
                        send();
                    };
                    document.getElementById("messages").appendChild(btn);
                });
            } else {
                addMessage("bot", "No options found.");
            }

            return;
        }

        // grab image from wikipedia
        let html = "";

        const imgRes = await fetch(
            `https://en.wikipedia.org/w/api.php?action=query&titles=${encodeURIComponent(pageTitle)}&prop=pageimages&pithumbsize=600&format=json&origin=*`
        );
        const imgData = await imgRes.json();
        const pageId = Object.keys(imgData.query.pages)[0];
        const pageInfo = imgData.query.pages[pageId];

        if (pageInfo.thumbnail && pageInfo.thumbnail.source) {
            html += `<img src="${pageInfo.thumbnail.source}" class="page-image">`;
        }

        let paragraphs = data.extract.split("\n").slice(0,5).join("<br><br>");
        html += `<b>Summary:</b><br><br>${paragraphs}`;

        addMessage("bot", html);

    } catch (err) {
        console.error(err);
        addMessage("bot", "Error retrieving data.");
    }
}

function addMessage(type, text) {
    const box = document.getElementById("messages");
    const div = document.createElement("div");
    div.className = "msg " + type;

    if (type === "bot") div.innerHTML = `<span class="bot">${text}</span>`;
    else div.innerHTML = `<span class="user">You:</span> ${text}`;

    box.appendChild(div);
    box.scrollTop = box.scrollHeight;
}
</script>
</body>
</html>

<!-- thanks for using my project now gtfo please --> 
